<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="stylesheet" href="./style.css">
    <title>Fast Kanban Simple</title>
</head>
<body>
    <div class="container ">

        <div class="title-h">
            <center>Javascript Exercise </center>
        </div>

       <div  class="border">    

        <div class="ks-heading">
            <strong class="ks-heading-text">Fast Kanban</strong>
        </div>
        <div class="ks-board">
            <div class="ks-block" id="todo" ondrop="drop(event)" ondragover="allowDrop(event)">
                <div calss="task-title">
                    <center><strong>To Do</strong></center>
                </div>
                <div class="task-button-block">
                    <button id="task-button" onclick="createTask()">New task</span>
                </div>
            </div>
            <div class="ks-block" id="inprogress" ondrop="drop(event)" ondragover="allowDrop(event)">
                <div calss="task-title">
                    <center><strong>In Progress</strong></center> 
                </div>
            </div>
            <div class="ks-block" id="done" ondrop="drop(event)" ondragover="allowDrop(event)">
                <div calss="task-title">
                    <center><strong>Done</strong></center> 
                </div>
            </div>
            <div class="create-new-task-block" id="create-new-task-block">
                <div calss="task-title">
                <strong>New Task</strong>
                <span class="form-row">
                    <label class="form-row-label" for="task-name">Task</label><br>
                    <input class="form-row-input" type="text" name="task-name" id="task-name">
                </span>
                <span class="form-row">
                    <label class="form-row-label" for="task-name">Description</label><br>
                    <textarea class="form-row-input" name="task-description" id="task-description" cols="70" rows="10"></textarea>
                </span>
                <span class="form-row">
                    <label class="form-row-label" for="task-name">Status</label><br>
                    <select class="form-row-input" name="task-status" id="task-status">
                        <option value="todo">To Do</option>
                        <!-- <option value="inprogress">In Progress</option>
                        <option value="done">Done</option> -->
                    </select>
                </span>
                <span class="form-row-buttons">
                    <button id="edit-button" onclick="editTask()">Edit</span>
                    <button id="save-button" onclick="saveTask()">Save</span>
                    <button id="cancel-button" onclick="createTask()">Cancel</span>
                </span>
            </div>
        </div>
      </div>  
      <div>
        *Drag the task between the boxes
      </div>
      <div>
        <button onclick="history.go(-1);">Go Back</button>
      </div>
     
    </div>
<script>



function createTask(){
    var x = document.getElementById("inprogress");
    var y = document.getElementById("done");
    var z = document.getElementById("create-new-task-block");
    if (x.style.display === "none") {
        x.style.display = "block";
        y.style.display = "block";
        z.style.display = "none";
    } else {
        x.style.display = "none";
        y.style.display = "none";
        z.style.display = "flex";
    }
}

function saveTask(){
    var todo = document.getElementById("todo");
    var taskName = document.getElementById("task-name").value;
    todo.innerHTML += `
    <div class="task" id="${taskName.toLowerCase().split(" ").join("")}" draggable="true" ondragstart="drag(event)">
        <span>${taskName}</span>
    </div>
    `
}

function editTask(){
    var save_Button = document.getElementById("save-button");
    var edit_Button = document.getElementById("edit-button");
    if (save_Button.style.display === "none") {
        save_Button.style.display = "block";
        edit_Button.style.display = "none";
    } else{
        save_Button.style.display = "none";
        edit_Button.style.display = "block";
    }
}

function drag(ev) {
    ev.dataTransfer.setData("text", ev.target.id);
}

function allowDrop(ev) {
    ev.preventDefault();
}

function drop(ev) {
    ev.preventDefault();
    var data = ev.dataTransfer.getData("text");
    ev.currentTarget.appendChild(document.getElementById(data));
}

</script>

</body>
</html>
